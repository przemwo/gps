import{j as V,l as p,r as n,R as te,a as ne}from"./vendor.e5940307.js";const re=function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))f(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&f(i)}).observe(document,{childList:!0,subtree:!0});function c(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function f(r){if(r.ep)return;r.ep=!0;const l=c(r);fetch(r.href,l)}};re();const t=V.exports.jsx,a=V.exports.jsxs,v=0,R=100,_=.1,ie=_,w=1,se={lat:"58.46124531",lng:"8.718217881"},oe=p.exports.divIcon({className:"current-position-icon",iconSize:20}),ae=p.exports.divIcon({className:"current-filtered-position-icon",iconSize:20}),C=p.exports.marker().setIcon(oe),S=p.exports.polyline([],{className:"trace-polyline trace-polyline-original"}),L=p.exports.marker().setIcon(ae),y=p.exports.polyline([],{className:"trace-polyline trace-polyline-filtered"}),le=()=>{const[o,m]=n.exports.useState([]),[c,f]=n.exports.useState([]),[r,l]=n.exports.useState(null),[i,h]=n.exports.useState(v),A=n.exports.useRef(),[I,j]=n.exports.useState(R),[O,x]=n.exports.useState({name:"NOT_STARTED"}),[b,z]=n.exports.useState(!0),[k,B]=n.exports.useState(!0),[F,Y]=n.exports.useState(!0),[E,J]=n.exports.useState(!0),[T,P]=n.exports.useState(1),[u,X]=n.exports.useState(v),[g,N]=n.exports.useState(Number.MAX_SAFE_INTEGER);n.exports.useEffect(()=>{o.length!==0&&(console.log({data:o}),r.setView(o[v],19),C.setLatLng(o[i]).addTo(r),N(o.length-1))},[o]),n.exports.useEffect(()=>{c.length!==0&&(console.log({filteredData:c}),L.setLatLng(c[i]).addTo(r))},[c]),n.exports.useEffect(()=>{try{const e=p.exports.map("map").setView(se,19),s=p.exports.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw",{maxZoom:28,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery \xA9 <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1}).addTo(e);S.addTo(e),y.addTo(e),l(e)}catch{}},[]),n.exports.useEffect(()=>{if(!r)return;i-A.current!==1?(S.setLatLngs(o.slice(u,i+1)),y.setLatLngs(c.slice(u,i+1))):(S.addLatLng(o[i]),y.addLatLng(c[i])),C.setLatLng(o[i]),L.setLatLng(c[i])},[i]),n.exports.useEffect(()=>{C.setOpacity(b?1:0)},[b]),n.exports.useEffect(()=>{L.setOpacity(k?1:0)},[k]),n.exports.useEffect(()=>{S.setStyle({opacity:F?1:0})},[F]),n.exports.useEffect(()=>{y.setStyle({opacity:E?1:0})},[E]),n.exports.useEffect(()=>{let e;return O.name==="STARTED"&&i<g&&(e=setTimeout(()=>{A.current=i,h(s=>s+1)},I)),()=>clearTimeout(e)},[O,i,I]),n.exports.useEffect(()=>{j(R*T)},[T]);const W=()=>{x({name:"STARTED"})},q=()=>{x({name:"PAUSED"})},G=()=>{h(u),x({name:"STOPPED"})},K=()=>{const e=o.length,s=Math.floor(e*ie);h(d=>d-s>=u?d-s:u)},U=()=>{const e=o.length,s=Math.floor(e*_);h(d=>d+s<=g?d+s:g)},Z=()=>{P(e=>Math.round((e+w+Number.EPSILON)*100)/100)},H=()=>{P(e=>{const s=Math.round((e-w+Number.EPSILON)*100)/100;return s<0?0:s})},D=e=>{const s=e.target.files[0];if(!s)return;const d=new FileReader;d.onload=function(ee){const M=JSON.parse(ee.target.result);e.target.id==="seriesA"?m(M):f(M)},d.readAsText(s)},Q=e=>{const s=Number(e.target.value)<0?0:Number(e.target.value);X(s),h(s),x({name:"STOPPED"})},$=e=>{const s=Number(e.target.value)>o.length-1?o.length-1:Number(e.target.value);N(s),h(u),x({name:"STOPPED"})};return a("div",{id:"wrapper",children:[t("div",{id:"map"}),a("div",{id:"sidebar",children:[a("div",{children:[t("button",{onClick:K,children:"<<"}),O.name==="STARTED"?t("button",{onClick:q,children:"Pause"}):t("button",{onClick:W,children:"Start"}),t("button",{onClick:G,children:"Stop"}),t("button",{onClick:U,children:">>"})]}),a("div",{children:[t("button",{onClick:Z,children:"-"}),t("button",{onClick:H,children:"+"})]}),a("div",{children:[t("h3",{children:"Markers"}),a("div",{children:[t("label",{htmlFor:"markerOriginal",children:"Original"}),t("input",{type:"checkbox",name:"markerOriginal",id:"markerOriginal",checked:b,onChange:()=>z(e=>!e)})]}),a("div",{children:[t("label",{htmlFor:"markersFiltered",children:"Filtered"}),t("input",{type:"checkbox",name:"markersFiltered",id:"markersFiltered",checked:k,onChange:()=>B(e=>!e)})]})]}),a("div",{children:[t("h3",{children:"Paths"}),a("div",{children:[t("label",{htmlFor:"pathOriginal",children:"Original"}),t("input",{type:"checkbox",name:"pathOriginal",id:"pathOriginal",checked:F,onChange:()=>Y(e=>!e)})]}),a("div",{children:[t("label",{htmlFor:"pathFiltered",children:"Filtered"}),t("input",{type:"checkbox",name:"pathFiltered",id:"pathFiltered",checked:E,onChange:()=>J(e=>!e)})]})]}),a("div",{children:[a("div",{children:[t("label",{htmlFor:"startIndex",children:"Start:"}),t("input",{type:"text",id:"startIndex",value:u,onChange:Q})]}),a("div",{children:[t("label",{htmlFor:"endIndex",children:"End:"}),t("input",{type:"text",id:"endIndex",value:g,onChange:$})]}),a("h3",{children:["Progress: ",i,"/",o.length-1]}),a("progress",{max:"1",value:i/(o.length-1),children:[" ",i/(o.length-1)," "]}),a("h3",{children:["Delay factor: ",T]}),a("h3",{children:["Delay: ",I]})]}),t("div",{children:t("input",{type:"file",id:"seriesA",accept:".json",onChange:D})}),t("div",{children:t("input",{type:"file",id:"seriesB",accept:".json",onChange:D})})]})]})};te.render(t(ne.StrictMode,{children:t(le,{})}),document.getElementById("root"));
